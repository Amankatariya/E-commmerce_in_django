!function(e,t,n,a,i){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof r.parcelRequire443e&&r.parcelRequire443e,d=o.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,n){if(!d[t]){if(!e[t]){var a="function"==typeof r.parcelRequire443e&&r.parcelRequire443e;if(!n&&a)return a(t,!0);if(o)return o(t,!0);if(l&&"string"==typeof t)return l(t);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}u.resolve=function(n){var a=e[t][1][n];return null!=a?a:n},u.cache={};var s=d[t]=new c.Module(t);e[t][0].call(s.exports,u,s,s.exports,this)}return d[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=d,c.parent=o,c.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return r.parcelRequire443e}}),r.parcelRequire443e=c;for(var s=0;s<t.length;s++)c(t[s]);var u=c(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define((function(){return u}))}({"8WLOx":[function(e,t,n){var a,i,r,o,d=e("@parcel/transformer-js/src/esmodule-helpers.js"),l=e("@swc/helpers/lib/_object_spread.js"),c=d.interopDefault(l),s=e("@swc/helpers/lib/_sliced_to_array.js"),u=d.interopDefault(s),v=e("@swc/helpers/lib/_to_consumable_array.js"),m=d.interopDefault(v);window.TOTAL_REVIEW_PAGES=0,window.ACTIVE_REVIEW_PAGE=1,window.ACTIVE_STAR_FILTER="",window.ACTIVE_SORT_FILTER="-created_at",window.PRODUCT_REVIEW_IMAGES=[],window.currentUserReviewId=0,window.editingReview=!1,window.isReviewRatingsPresent=!1,window.ratingColors=["#F17A54","#FBB851","#F6D757","#B7EA83","#76DB98"],window.sortMapping={"-created_at":null===(a=window.DukaanData)||void 0===a?void 0:a.DUKAAN_LANGUAGE.NEWEST_FIRST,created_at:null===(i=window.DukaanData)||void 0===i?void 0:i.DUKAAN_LANGUAGE.OLDEST_FIRST,"-rating":null===(r=window.DukaanData)||void 0===r?void 0:r.DUKAAN_LANGUAGE.HIGHEST_RATED,rating:null===(o=window.DukaanData)||void 0===o?void 0:o.DUKAAN_LANGUAGE.LOWEST_RATED},window.singleStar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"not-overlapped";return"<svg class=".concat(n,' width="').concat(t,'" height="24" viewBox="0 0 ').concat(t,' 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 20.0196L17.9971 23.808C18.9434 24.4056 20.1104 23.5175 19.8594 22.3919L18.2675 15.2508L23.567 10.4454C24.4022 9.68877 23.9557 8.25246 22.855 8.15519L15.879 7.5362L13.1502 0.796791C12.7193 -0.265597 11.2807 -0.265597 10.8498 0.796791L8.12099 7.5362L1.14504 8.15519C0.044341 8.25246 -0.402216 9.68877 0.432966 10.4454L5.73251 15.2508L4.1406 22.3919C3.88956 23.5175 5.05664 24.4056 6.00286 23.808L12 20.0196Z" fill="').concat(e,'" /></svg>')},window.reviewsTemplate=document.getElementById("ratings-container"),window.reviewsContainer=document.importNode(reviewsTemplate.content,!0),window.mainReviewFetchCall=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;customTag("ratings-plugin",(function(n){return fetchProductReviewStats(e,n,t)}))},window.renderReviewsPlugin=function(){editingReview=!1,axios.get("https://apps.mydukaan.io/public/v2/apps/store/".concat(DukaanData.DUKAAN_STORE.id,"/")).then((function(e){var t,n,a=(null==e?void 0:e.data).store_apps_list,i=null==a?void 0:a.reduce((function(e,t){return t.isActive&&(e[t._id]=t),e}),{});isReviewRatingsPresent=!(!i||!i[APP_IDS.REVIEWS_AND_RATINGS]),isReviewRatingsPresent?mainReviewFetchCall(!0):null===(t=document.getElementById("ratings-plugin-container"))||void 0===t||null===(n=t.classList)||void 0===n||n.add("hidden")})).catch((function(e){var t,n;null===(t=document.getElementById("ratings-plugin-container"))||void 0===t||null===(n=t.classList)||void 0===n||n.add("hidden")}))},window.fetchProductReviewStats=function(e,t,n){t.append(reviewsContainer);var a=DukaanData.DUKAAN_PRODUCT.id,i={};localStorage&&localStorage.al_to&&(i.Authorization="Bearer ".concat(localStorage.al_to)),i["Content-Type"]="application/json",fetch("".concat(window.DukaanData.CLIENT_API_ENDPOINT,"/api/product/buyer/").concat(a,"/product/review/stats/"),{method:"get",headers:i}).then((function(e){return e.json()})).then((function(t){var a,i,r,o,d=null==t?void 0:t.data;!(null==d||null===(a=d.rating_data)||void 0===a?void 0:a.length)&&(null===window||void 0===window||null===(i=window.pluginsConfig)||void 0===i?void 0:i.hideReviewsPlugin)&&e?null===(r=document.getElementById("ratings-plugin-container"))||void 0===r||null===(o=r.classList)||void 0===o||o.add("hidden"):(window.DukaanData.RATINGS_DATA=d,createRatingsSection(d),"undefined"!=typeof customReviewsInfoRenderer?customReviewsInfoRenderer(d):renderReviewsInfoPDP(d),fetchProductReviews(1,null,null,e),n&&n(d))}))},window.returnStarList=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t=arguments.length>1?arguments[1]:void 0,n=Math.floor(t),a=t-n,i="",r=getComputedStyle(document.documentElement).getPropertyValue("--rating-star-filled-color")||"#FAB73B",o=getComputedStyle(document.documentElement).getPropertyValue("--rating-star-unfilled-color")||"#D9D9D9",d=0;d<5;d++)i+=d<n?'<div class="svgRating">'.concat(singleStar(r,e),"</div>"):0!=n&&d==n?'<div class="svgRating"><div class="overlapped">'.concat(singleStar("#D9D9D9",e)).concat(singleStar(r,Math.floor(e*a),"overlapped"),"</div></div>"):'<div class="svgRating">'.concat(singleStar(o,e),"</div>");return i},window.renderReviewsInfoPDP=function(e){var t=document.getElementById("rating-info-pdp");if(t){var n="".concat(e.total_count," \n      ").concat(e.total_count>1?DukaanData.DUKAAN_LANGUAGE.CUSTOMER_RATINGS:DukaanData.DUKAAN_LANGUAGE.CUSTOMER_RATING);t.querySelector(".rating-info-star-list").innerHTML=returnStarList(24,e.rating_average),t.querySelector(".scroll-to-plugin").textContent=n}},window.renderRatingsStats=function(e){for(var t=function(t){var n=e.rating_data.filter((function(e){return e.rating==t})),a=0;n&&n.length>0&&(a=Math.round(100*n[0].count/e.total_count)),document.getElementById("total-stars-".concat(t)).textContent="".concat(t," ").concat(window.pluralize(t,DukaanData.DUKAAN_LANGUAGE.STAR)),document.getElementById("percent-".concat(t)).innerHTML="".concat(a,"%"),document.getElementById("bg-progress-".concat(t)).style.width="100%",document.getElementById("progress-".concat(t)).style.backgroundColor=window.ratingColors[t-1],document.getElementById("progress-".concat(t)).style.width="".concat(a,"%")},n=1;n<=5;n+=1)t(n)},window.createRatingsSection=function(e){var t;"undefined"!=typeof customCustomerRatingTextRenderer?customCustomerRatingTextRenderer(e):document.querySelector(".customerRatingText").textContent="".concat(DukaanData.DUKAAN_LANGUAGE.CUSTOMER_RATINGS),document.getElementById("rating-container").innerHTML=returnStarList(24,e.rating_average),e.rating_average?document.getElementById("rating-value").innerHTML="".concat(Number(null==e||null===(t=e.rating_average)||void 0===t?void 0:t.toFixed(1))," out of 5"):(document.getElementById("rating-value").classList.add("hidden"),document.getElementById("rating-value").innerHTML="");var n="".concat(e.total_count," \n  ").concat(e.total_count>1?DukaanData.DUKAAN_LANGUAGE.CUSTOMER_RATINGS:DukaanData.DUKAAN_LANGUAGE.CUSTOMER_RATING);document.getElementById("rating-count").innerHTML=n,"undefined"!=typeof customRatingsStatsRenderer?customRatingsStatsRenderer(e):renderRatingsStats(e),null==e.review&&e.rating_data.length>0?document.getElementById("create-review-button").classList.remove("hidden"):document.getElementById("create-review-button").classList.add("hidden"),"undefined"!=typeof customRatingsStatsRenderer&&customRatingsStatsRenderer(e)},window.createPaginationList=function(e){if(TOTAL_REVIEW_PAGES<=1)return document.getElementById("pagination-list").classList.add("hidden"),void(document.getElementById("pagination-list").innerHTML="");document.getElementById("pagination-list").classList.remove("hidden"),document.getElementById("pagination-list").innerHTML="";var t=1,n=1;TOTAL_REVIEW_PAGES<=5?n=TOTAL_REVIEW_PAGES:e<=5?(t=1,n=5):(t=e-2,e===TOTAL_REVIEW_PAGES?(n=e,t=e-4):e===TOTAL_REVIEW_PAGES-1?(n=TOTAL_REVIEW_PAGES,t=e-3):n=e+2);var a="";e>1&&TOTAL_REVIEW_PAGES>1?a+='<div class="review-nav-link flex d-row a-center j-start" onclick="fetchProductReviews('.concat(e-1,')"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" color="var(--primary)" spacing="mr-2"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.41689 10.2919C8.66914 10.0396 8.69208 9.6449 8.48569 9.36675L8.41689 9.28706L5.13016 6L8.41689 2.71294C8.66914 2.46069 8.69208 2.06596 8.48569 1.7878L8.41689 1.70811C8.16464 1.45586 7.76991 1.43292 7.49175 1.63931L7.41206 1.70811L3.62258 5.49758C3.37033 5.74983 3.3474 6.14457 3.55379 6.42273L3.62258 6.50242L7.41206 10.2919C7.68953 10.5694 8.13941 10.5694 8.41689 10.2919Z" fill="var(--primary)"></path></svg>').concat(DukaanData.DUKAAN_LANGUAGE.PREVIOUS,"</div>"):a+='<div class="review-nav-link"></div>',a+='<div id="reviews-pages" class="flex">';for(var i=t;i<=n;i+=1)a+=e===i?'<li class="active" onclick="fetchProductReviews('.concat(i,')">').concat(i,"</li>"):'<li onclick="fetchProductReviews('.concat(i,')">').concat(i,"</li>");a+="</div>",e!==TOTAL_REVIEW_PAGES&&0!==TOTAL_REVIEW_PAGES?a+='<div class="review-nav-link flex d-row a-center j-end" onclick="fetchProductReviews('.concat(e+1,')">').concat(DukaanData.DUKAAN_LANGUAGE.NEXT,' <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" color="var(--primary)" ><path fill-rule="evenodd" clip-rule="evenodd" d="M3.58311 10.2919C3.33086 10.0396 3.30792 9.6449 3.51431 9.36675L3.58311 9.28706L6.86984 6L3.58311 2.71294C3.33086 2.46069 3.30792 2.06596 3.51431 1.7878L3.58311 1.70811C3.83536 1.45586 4.23009 1.43292 4.50825 1.63931L4.58794 1.70811L8.37742 5.49758C8.62967 5.74983 8.6526 6.14457 8.44621 6.42273L8.37742 6.50242L4.58794 10.2919C4.31047 10.5694 3.86059 10.5694 3.58311 10.2919Z" fill="var(--primary)"></path></svg></div>'):a+='<div class="review-nav-link"></div>',document.getElementById("pagination-list").innerHTML=a},window.createReviewsList=function(e){var t=document.getElementById("reviews-list");if(t.innerHTML="",t.classList.add("hidden"),e&&e.length>0){document.getElementById("rating-info-pdp")&&document.getElementById("rating-info-pdp").classList.remove("hidden"),t.classList.remove("hidden"),document.querySelector(".filters-container").classList.remove("hidden"),document.getElementById("no-reviews-cta").classList.add("hidden");var n=-1,a=e.map((function(e){var t=e.images;return(null==t?void 0:t.map((function(t){return{id:n+=1,image:t,review:e}})))||[]})).flat();e.forEach((function(e,n){var i=e.full_name,r=e.verified_purchase,o=e.created_at,d=e.description,l=e.reply,c=e.reply_date,s=e.images,u=document.getElementById("review-item"),v=document.importNode(u.content,!0);v.querySelector(".reviewer-name").textContent=i,r&&("undefined"!=typeof customReviewsVerifiedBadgeRenderer?customReviewsVerifiedBadgeRenderer(v):v.querySelector(".verified-badge").classList.remove("hidden"));for(var m=v.querySelector(".review-stars"),w=1;w<=5;w++){var g=document.getElementById("star"),f=document.importNode(g.content,!0);w<=e.rating?(f.querySelector("svg").classList.add("overlapped"),m.append(f)):(f.querySelector("svg").classList.add("not-overlapped"),f.querySelector("path").style.fill="#D9D9D9",m.append(f))}v.querySelector(".review-date").textContent=dateFormatter(o);var p,_,E=null==s?void 0:s.map((function(e){var t=a.find((function(t){return t.image===e}));return{image:e,id:null==t?void 0:t.id}}));if(E&&E.length>0){var A=v.querySelector(".review-images-container");A.classList.remove("hidden"),E.map((function(e){var t=e.image,n=e.id,a=document.createElement("img");a.setAttribute("src","".concat(getCdnUrl(t,50))),a.classList.add("review-image"),a.classList.add("cursor-pointer"),a.setAttribute("onclick","handleImagesWithReviewModalOpen(".concat(n,")")),A.append(a)}))}(d&&(v.querySelector(".review-desc").classList.remove("hidden"),v.querySelector(".review-desc").textContent=d),localStorage&&localStorage.al_to&&JSON.parse(decodeBase64(localStorage.al_to.split(".")[1])).buyer_id===e.buyer&&(currentUserReviewId=e.id,v.querySelector(".review-actions").classList.remove("hidden")),l)&&(v.querySelector(".review-reply-wrapper").classList.remove("hidden"),v.querySelector(".seller-name").textContent=null===window||void 0===window||null===(p=window.DukaanData)||void 0===p||null===(_=p.DUKAAN_STORE)||void 0===_?void 0:_.name,v.querySelector(".seller-reply").textContent=l,v.querySelector(".seller-reply-date").textContent=dateFormatter(c));t.append(v)}))}},window.createImagesModal=function(e){var t=deviceType().isMobile?4:6;if(e&&e.length>0){window.DukaanData.ALL_IMAGES_WITH_REVIEWS=e;var n=document.getElementById("user-images-container");n.classList.remove("hidden"),n.querySelector(".user-photos-title").textContent="".concat(DukaanData.DUKAAN_LANGUAGE.CUSTOMER_PHOTOS," (").concat(e.length,")");var a=n.querySelector(".images-container");a.innerHTML="",e.slice(0,t).map((function(n,i){var r=n.image,o=n.id,d=document.createElement("div"),l=document.createElement("img");if(l.setAttribute("src","".concat(getCdnUrl(r,200))),d.classList.add("user-photo"),d.append(l),a.append(d),i===t-1&&e.length>t){var c=document.createElement("div"),s=document.createElement("div");s.classList.add("count-text"),s.textContent="+".concat(e.length-t);var u=document.createElement("div");u.classList.add("view-all-text"),u.textContent=DukaanData.DUKAAN_LANGUAGE.VIEW_ALL,c.append(s),c.append(u),c.setAttribute("onclick","handleAllImagesModalOpen()"),d.append(c),c.classList.add("review-image-overlay")}else l.setAttribute("onclick","handleImagesWithReviewModalOpen(".concat(o,")"))}))}else{document.getElementById("user-images-container").classList.add("hidden")}},window.handleAllImagesModalOpen=function(){document.getElementsByTagName("body")[0].style.overflow="hidden";var e=window.DukaanData.ALL_IMAGES_WITH_REVIEWS,t=document.getElementById("all-images-modal");t.classList.remove("hidden"),document.getElementsByTagName("body")[0].style.overflow="hidden";var n=t.querySelector(".modal-images-container");n.innerHTML="",t.querySelector(".all-images-heading").textContent="All customer photos (".concat(e.length,")"),e.map((function(e){var t=e.image,a=e.id,i=document.createElement("div"),r=document.createElement("img");r.setAttribute("src","".concat(getCdnUrl(t,400))),i.classList.add("user-photo-modal"),i.setAttribute("onclick","handleImagesWithReviewModalOpen(".concat(a,")")),i.append(r),n.append(i)}))},window.handleAllImagesModalClose=function(){document.getElementById("all-images-modal").classList.add("hidden"),document.getElementsByTagName("body")[0].style.overflow="auto"},window.handleImagesWithReviewModalOpen=function(e){document.getElementsByTagName("body")[0].style.overflow="hidden",handleAllImagesModalClose(),deviceType().isMobile?renderMobileModalReview(e):renderDesktopModalReview(e)},window.renderMobileModalReview=function(e){var t=window.DukaanData.ALL_IMAGES_WITH_REVIEWS,n=document.getElementById("review-detail-modal-mobile");n.classList.remove("hidden");var a=n.querySelector(".splide__list"),i="";t.map((function(e){var t=e.image,n='<li class="splide__slide">\n            <img loading="lazy" src="'.concat(getCdnUrl(t,800),'"\n              alt="" />\n          </li>');i+=n})),a.innerHTML=i,renderMobileModalReviewData(e);var r=new Splide("#review-detail-carousel-mobile",{pagination:!1});window.mobileReviewSplide=r,r.mount(),r.go(e),r.on("move",(function(){renderMobileModalReviewData(r.index)}))},window.renderMobileModalReviewData=function(e){var t=window.DukaanData.ALL_IMAGES_WITH_REVIEWS,n=document.getElementById("review-detail-modal-mobile"),a=t[e],i=a.review,r=void 0===i?{}:i,o=(a.id,r.full_name),d=r.verified_purchase,l=r.created_at,c=r.description,s=(r.reply,r.reply_date,r.images),u=n.querySelector(".sticky-review-details");u.querySelector(".mobile-reviewer-name").textContent=o;var v=null==s?void 0:s.map((function(e){var n=null==t?void 0:t.find((function(t){return(null==t?void 0:t.image)===e}));return{image:e,id:null==n?void 0:n.id}}));d&&u.querySelector(".verified-badge").classList.remove("hidden");var m=u.querySelector(".review-stars");m.innerHTML="";for(var w=1;w<=5;w++){var g=document.getElementById("star"),f=document.importNode(g.content,!0);w<=r.rating||(f.querySelector("path").style.fill="#D9D9D9"),m.append(f)}var p=n.querySelector(".thumbnail-list-mobile");if(v&&v.length>0&&(p.innerHTML="",v.map((function(t){var n=t.id,a=t.image,i=document.createElement("li");i.classList.add("thumbnail-item"),i.classList.add("thumbnail-item-".concat(n)),e===n&&i.classList.add("thumbnail-is-active");var r=document.createElement("img");r.setAttribute("src","".concat(getCdnUrl(a,100))),i.append(r),i.addEventListener("click",(function(){mobileReviewSplide.go(n)})),p.append(i)}))),u.querySelector(".review-date").textContent=dateFormatter(l),c){var _=(null==c?void 0:c.length)>120,E=u.querySelector(".review-desc");if(E.classList.add("mobile-desc"),E.classList.remove("hidden"),E.textContent=c,_){E.classList.add("line-clamp");var A=u.querySelector(".show-more");A.innerHTML="",A.innerHTML='<div class="flex d-row a-center j-start" id="show-more-toggle" onclick="handleTextShowMoreToggle(event)" >\n    <div id="show-text">See more</div><div class="show-svg"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.55806 5.55806C2.80214 5.31398 3.19786 5.31398 3.44194 5.55806L8 10.1161L12.5581 5.55806C12.8021 5.31398 13.1979 5.31398 13.4419 5.55806C13.686 5.80214 13.686 6.19786 13.4419 6.44194L8.44194 11.4419C8.19786 11.686 7.80214 11.686 7.55806 11.4419L2.55806 6.44194C2.31398 6.19786 2.31398 5.80214 2.55806 5.55806Z" fill="white"/>\n    </svg>\n    </div>    \n    </div>\n    <div class="flex d-row a-center j-start hidden" id="show-less-toggle" onclick="handleTextShowLessToggle(event)" >\n    <div id="show-text">See less</div><div class="show-svg"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.55806 5.55806C2.80214 5.31398 3.19786 5.31398 3.44194 5.55806L8 10.1161L12.5581 5.55806C12.8021 5.31398 13.1979 5.31398 13.4419 5.55806C13.686 5.80214 13.686 6.19786 13.4419 6.44194L8.44194 11.4419C8.19786 11.686 7.80214 11.686 7.55806 11.4419L2.55806 6.44194C2.31398 6.19786 2.31398 5.80214 2.55806 5.55806Z" fill="white"/>\n    </svg>\n    </div>    \n    </div>',u.append(A)}}},window.handleTextShowMoreToggle=function(e){var t=e.target.parentElement.parentNode.parentNode.parentNode;t.querySelector(".review-desc").classList.remove("line-clamp"),t.querySelector("#show-more-toggle").classList.add("hidden"),t.querySelector("#show-less-toggle").classList.remove("hidden")},window.handleTextShowLessToggle=function(e){var t=e.target.parentElement.parentNode.parentNode.parentNode.parentNode;t.querySelector(".review-desc").classList.add("line-clamp"),t.querySelector("#show-more-toggle").classList.remove("hidden"),t.querySelector("#show-less-toggle").classList.add("hidden")},window.renderDesktopModalReview=function(e){var t=window.DukaanData.ALL_IMAGES_WITH_REVIEWS,n=document.getElementById("review-detail-modal-desktop");n.classList.remove("hidden");var a=n.querySelector(".splide__list"),i="";t.map((function(e){var t=e.image,n='<li class="splide__slide">\n            <img loading="lazy" src="'.concat(getCdnUrl(t,800),'"\n              alt="" />\n          </li>');i+=n})),a.innerHTML=i,renderDesktopModalReviewData(e);var r=new Splide("#review-detail-carousel-images",{pagination:!1});window.reviewSplide=r,r.mount(),r.go(e),r.on("move",(function(){renderDesktopModalReviewData(r.index)}))},window.renderDesktopModalReviewData=function(e){var t=window.DukaanData.ALL_IMAGES_WITH_REVIEWS,n=document.getElementById("review-detail-modal-desktop"),a=t[e],i=a.review,r=void 0===i?{}:i,o=(a.id,r.full_name),d=r.verified_purchase,l=r.created_at,c=r.description,s=(r.reply,r.reply_date,r.images),u=n.querySelector(".review-item-wrapper");u.querySelector(".desktop-reviewer-name").textContent=o;var v=null==s?void 0:s.map((function(e){var n=t.find((function(t){return t.image===e}));return{image:e,id:null==n?void 0:n.id}}));d&&u.querySelector(".verified-badge").classList.remove("hidden");var m=u.querySelector(".review-stars");m.innerHTML="";for(var w=1;w<=5;w++){var g=document.getElementById("star"),f=document.importNode(g.content,!0);w<=r.rating||(f.querySelector("path").style.fill="#D9D9D9"),m.append(f)}var p=n.querySelector(".thumbnail-list");v&&v.length>0&&(p.innerHTML="",v.map((function(t){var n=t.id,a=t.image,i=document.createElement("li");i.classList.add("thumbnail-item"),i.classList.add("thumbnail-item-".concat(n)),e===n&&i.classList.add("thumbnail-is-active");var r=document.createElement("img");r.setAttribute("src","".concat(getCdnUrl(a,100))),i.append(r),i.addEventListener("click",(function(){reviewSplide.go(n)})),p.append(i)}))),u.querySelector(".review-date").textContent=dateFormatter(l),c&&(u.querySelector(".review-desc").classList.remove("hidden"),u.querySelector(".review-desc").textContent=c)},window.handleImagesWithReviewModalClose=function(){document.getElementsByTagName("body")[0].style.overflow="auto",deviceType().isMobile?document.getElementById("review-detail-modal-mobile").classList.add("hidden"):document.getElementById("review-detail-modal-desktop").classList.add("hidden")},window.fetchProductReviews=function(e,t,n){var a,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!i){var r=document.getElementById("reviews-list"),o=r.getBoundingClientRect().top+window.scrollY;window.scroll({top:o-250,behavior:"smooth"})}e||(e=ACTIVE_REVIEW_PAGE),t||(t=ACTIVE_SORT_FILTER),n||(n=ACTIVE_STAR_FILTER),-1==n&&(ACTIVE_STAR_FILTER="",n=ACTIVE_STAR_FILTER),document.getElementById("filter-sort-title").innerHTML=sortMapping[t];var d=document.querySelectorAll(".time-dropdown-item");d.forEach((function(e){e.classList.contains("value-".concat(t))?(e.classList.add("time-dropdown-item-bold"),e.querySelector(".selected").classList.remove("hidden"),e.querySelector(".not-selected").classList.add("hidden")):(e.classList.remove("time-dropdown-item-bold"),e.querySelector(".selected").classList.add("hidden"),e.querySelector(".not-selected").classList.remove("hidden"))}));var l=document.querySelectorAll(".rating-dropdown-item");l.forEach((function(e){e.classList.contains("value-".concat(""===n?-1:n))?(e.classList.add("rating-dropdown-item-bold"),e.querySelector(".selected").classList.remove("hidden"),e.querySelector(".not-selected").classList.add("hidden")):(e.classList.remove("rating-dropdown-item-bold"),e.querySelector(".selected").classList.add("hidden"),e.querySelector(".not-selected").classList.remove("hidden"))})),document.getElementById("filter-star-title").innerHTML=1===n?"1 ".concat(DukaanData.DUKAAN_LANGUAGE.STAR):""===n?DukaanData.DUKAAN_LANGUAGE.ALL_RATINGS:"".concat(n," ").concat(DukaanData.DUKAAN_LANGUAGE.STARS);var s=DukaanData.DUKAAN_PRODUCT.id,u={"Content-Type":"application/json"};localStorage&&localStorage.al_to&&(u.Authorization="Bearer ".concat(localStorage.al_to));var v=document.getElementById("reviews-list");v.innerHTML="";var m=document.getElementById("reviews-loader-elem"),w=document.importNode(m.content,!0);null===(a=w.querySelector(".bounceLoader"))||void 0===a||a.classList.remove("hidden"),document.getElementById("pagination-list").classList.add("hidden"),v.appendChild(w),fetch("".concat(window.DukaanData.CLIENT_API_ENDPOINT,"/api/product/buyer/").concat(s,"/product/review/?page_size=5&page=").concat(e,"&ordering=").concat(t,"&rating=").concat(n),{method:"get",headers:u}).then((function(e){return e.json()})).then((function(a){var r,o,d=null==a?void 0:a.results,l=-1,s=d.map((function(e){var t=e.images;return(null==t?void 0:t.map((function(t){return{id:l+=1,image:t,review:e}})))||[]})).flat();if((null==a?void 0:a.count)>0){document.getElementById("no-review-container").classList.add("hidden"),document.getElementById("reviews-title").innerHTML="".concat(DukaanData.DUKAAN_LANGUAGE.CUSTOMER_REVIEWS," (").concat(null==a?void 0:a.count,")");var u=window.DukaanData.RATINGS_DATA;null==u.review&&u.rating_data.length>0&&document.getElementById("create-review-button").classList.remove("hidden")}else document.getElementById("no-review-container").classList.remove("hidden"),document.getElementById("reviews-title").innerHTML=DukaanData.DUKAAN_LANGUAGE.NO_REVIEWS,document.getElementById("no-reviews-cta").classList.remove("hidden"),document.getElementById("create-review-button").classList.add("hidden"),i&&document.querySelector(".filters-container").classList.add("hidden");TOTAL_REVIEW_PAGES=Math.ceil(((null==a?void 0:a.count)||0)/5),ACTIVE_REVIEW_PAGE=e,ACTIVE_SORT_FILTER=t,ACTIVE_STAR_FILTER=n,createReviewsList(d),createPaginationList(e),createImagesModal(s);var v=localStorage&&localStorage.al_to?JSON.parse(decodeBase64(localStorage.al_to.split(".")[1])).buyer_id:null,m=d.filter((function(e){return e.buyer===v}))[0];localStorage&&localStorage.al_to&&m&&(window.DukaanData.RATINGS_DATA_CLIENT={review:(0,c.default)({},m)}),(null===(r=window.DukaanData)||void 0===r||null===(o=r.RATINGS_DATA_CLIENT)||void 0===o?void 0:o.review)&&(document.querySelector(".no-reviews-cta-btn").classList.add("hidden"),document.querySelector(".no-reviews-cta-text").innerHTML="".concat(DukaanData.DUKAAN_LANGUAGE.YOU_HAVE_ALREADY_REVIEWED_THIS_PRODUCT,"!"))}))},window.RATING_TEXT_MAP=function(){return{1:DukaanData.DUKAAN_LANGUAGE.HATED_IT,2:DukaanData.DUKAAN_LANGUAGE.DIDNT_LIKE_IT,3:DukaanData.DUKAAN_LANGUAGE.JUST_OK,4:DukaanData.DUKAAN_LANGUAGE.LIKED_IT,5:DukaanData.DUKAAN_LANGUAGE.LOVED_IT}},window.setActiveRatingValue=function(e){var t,n=window.DukaanData.RATINGS_DATA,a=((null==n||null===(t=n.review)||void 0===t?void 0:t.rating)||0)-1;!editingReview||editingReview&&e!==a?document.getElementById("review-submit-btn").classList.remove("disabled"):document.getElementById("review-submit-btn").classList.add("disabled"),e=Number(e);var i=document.querySelector(".tooltip-".concat(e));null==i||i.classList.remove("hidden");var r=document.getElementById("rm-rating-div");r.querySelector(".rating-meaning-text").textContent=RATING_TEXT_MAP()[e+1],r.querySelectorAll(".not-selected-star").forEach((function(t,n){n<=e?t.classList.add("selected-rating-star"):t.classList.contains("selected-rating-star")&&t.classList.remove("selected-rating-star")})),document.getElementById("rating-input").value=e+1,setTimeout((function(){i.classList.add("hidden")}),500)},window.handleTextValueChange=function(e){if(editingReview){var t=window.DukaanData.RATINGS_DATA;if(e){var n,a=null==t?void 0:t.review[null==e||null===(n=e.target)||void 0===n?void 0:n.name];e.target.value!==a&&document.getElementById("review-submit-btn").classList.remove("disabled")}}var i=document.querySelector(".rm-max-length-text");i&&(i.textContent="".concat(e.target.value.length,"/500"))},window.getProductReviewImages=function(){return PRODUCT_REVIEW_IMAGES.filter((function(e){return!!e}))},window.updateReviewImageLimit=function(){getProductReviewImages().length>=4?document.querySelector(".rm-form-add-pic-wrap input").disabled=!0:document.querySelector(".rm-form-add-pic-wrap input").disabled=!1},window.updateReviewImageCount=function(){var e=document.querySelector(".product-images-upload-count");getProductReviewImages().length>=1?(e.classList.remove("hidden"),e.textContent="(".concat(getProductReviewImages().length,"/4)")):e.classList.add("hidden")},window.checkReviewImageUpdated=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=window.DukaanData.RATINGS_DATA,a=null==n||null===(e=n.review)||void 0===e?void 0:e.images;JSON.stringify(getProductReviewImages())===JSON.stringify(a)||t?document.getElementById("review-submit-btn").classList.add("disabled"):document.getElementById("review-submit-btn").classList.remove("disabled")},window.handleImageUploadForReview=function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.addEventListener("load",(function(){PRODUCT_REVIEW_IMAGES.push(" "),renderProductReviewImages(n.result,!0),checkReviewImageUpdated(!0),document.querySelector(".rm-form-add-pic-wrap input").disabled=!0}),!1),t&&n.readAsDataURL(t);var a=new FormData;a.append("file",t),axios({method:"post",url:"".concat(window.DukaanData.CLIENT_API_ENDPOINT,"/api/product/buyer/file/upload/"),data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;if(document.querySelector(".rm-form-add-pic-wrap input").disabled=!1,t&&t.data&&t.data.file){var n=t.data.file;PRODUCT_REVIEW_IMAGES[PRODUCT_REVIEW_IMAGES.length-1]=n;var a=document.querySelectorAll(".product-review-img");a[a.length-1].setAttribute("src",n),checkReviewImageUpdated(!1)}else handleImageUploadFailed()})).catch((function(e){handleImageUploadFailed()}))}},window.handleImageUploadFailed=function(){PRODUCT_REVIEW_IMAGES.shift();var e=document.querySelectorAll(".review-image-card");e[e.length-1].remove(),updateReviewImageLimit(),updateReviewImageCount()},window.renderProductReviewImages=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector(".display-review-images"),a=document.importNode(document.querySelector("#product-review-images").content,!0);a.querySelector("img").setAttribute("src",t?e:"".concat(getCdnUrl(e||PRODUCT_REVIEW_IMAGES[PRODUCT_REVIEW_IMAGES.length-1],100))),a.querySelector("svg").setAttribute("id",PRODUCT_REVIEW_IMAGES.length-1),n.appendChild(a),updateReviewImageLimit(),updateReviewImageCount()},window.handleDeleteProductReviewImages=function(e){var t=e.currentTarget.parentNode,n=e.currentTarget.id;PRODUCT_REVIEW_IMAGES[n]=null,t.remove(),checkReviewImageUpdated(),updateReviewImageLimit(),updateReviewImageCount()},window.handleReviewSubmit=function(e){var t,n;e.preventDefault();var a=new FormData(document.querySelector("form#review-form")),i=(0,m.default)(a.entries()).reduce((function(e,t){var n=(0,u.default)(t,2),a=n[0],i=n[1];return e[a]=i,e}),{});if(i.rating=Number(i.rating),i.images=getProductReviewImages()||[],document.querySelectorAll(".rm-rating-star.selected-rating-star").length<=0){var r=document.getElementById("rm-rating-star-wrapper");return r.classList.add("error-field"),r.classList.add("shake"),setTimeout((function(){return r.classList.remove("shake")}),800),void(document.getElementById("review-helper-text").textContent=DukaanData.DUKAAN_LANGUAGE.STARS_ARE_REQUIRED)}if(""===i.full_name.trim()){var o=document.getElementById("full_name-input").parentNode;return o.classList.add("error-field"),o.classList.add("shake"),setTimeout((function(){return o.classList.remove("shake")}),800),void(document.getElementById("full_name-helper-text").textContent=DukaanData.DUKAAN_LANGUAGE.NAME_IS_REQUIRED)}null===(t=document.getElementById("review-submit-btn"))||void 0===t||t.classList.add("disabled"),localStorage&&localStorage.al_to&&!editingReview&&axios.post("".concat(window.DukaanData.CLIENT_API_ENDPOINT,"/api/product/buyer/").concat(window.DukaanData.DUKAAN_PRODUCT.id,"/product/review/"),i,{headers:{Authorization:"Bearer ".concat(localStorage.al_to),"x-requested-with":null===window||void 0===window||null===(n=window.DukaanData)||void 0===n?void 0:n.DUKAAN_SESSION_ID}}).then((function(e){document.getElementById("review-submit-btn").classList.remove("disabled"),closeWriteReviewModal(),mainReviewFetchCall(),window.DukaanData.RATINGS_DATA_CLIENT={review:(0,c.default)({},i)},enqueueSnackbar(DukaanData.DUKAAN_LANGUAGE.REVIEW_POSTED_SUCCESSFULLY,!0,"success")})).catch((function(e){return console.log(e)})),editingReview&&axios.patch("".concat(window.DukaanData.CLIENT_API_ENDPOINT,"/api/product/buyer/").concat(window.DukaanData.DUKAAN_PRODUCT.id,"/product/review/").concat(currentUserReviewId,"/"),i,{headers:{Authorization:"Bearer ".concat(localStorage.al_to)}}).then((function(e){closeWriteReviewModal(),mainReviewFetchCall(),enqueueSnackbar(DukaanData.DUKAAN_LANGUAGE.REVIEW_UPDATED_SUCCESSFULLY,!0,"success")})).catch((function(e){return console.log(e)}))},window.openWriteReviewModal=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.getElementsByTagName("body")[0].style.overflow="hidden";var t=document.getElementById("write-review-modal");if(t.classList.remove("hidden"),e){var n,a,i;editingReview=!0;var r=window.DukaanData.RATINGS_DATA;t.querySelectorAll(".write-review-heading").forEach((function(e){return e.textContent=DukaanData.DUKAAN_LANGUAGE.EDIT_REVIEW})),t.querySelector(".review-submit-btn").textContent=DukaanData.DUKAAN_LANGUAGE.UPDATE,(null==r||null===(n=r.review)||void 0===n?void 0:n.images)&&(null==r||null===(a=r.review)||void 0===a?void 0:a.images.length)>0&&(null==r||null===(i=r.review)||void 0===i||i.images.forEach((function(e){PRODUCT_REVIEW_IMAGES.push(e),renderProductReviewImages(e)})));var o=new FormData(document.querySelector("form#review-form")),d=(0,m.default)(o.entries()).reduce((function(e,t){var n=(0,u.default)(t,2),a=n[0],i=n[1];return e[a]=i,e}),{}),l=r.review;Object.entries(d).forEach((function(e){var t=(0,u.default)(e,2),n=t[0];t[1];"rating"===n&&setActiveRatingValue(l.rating-1),document.getElementById("".concat(n,"-input"))&&(document.getElementById("".concat(n,"-input")).value=l[n])}))}},window.closeWriteReviewModal=function(){document.getElementsByTagName("body")[0].style.overflow="auto",document.getElementById("write-review-modal").classList.add("hidden"),PRODUCT_REVIEW_IMAGES=[],document.querySelector(".display-review-images").innerHTML=null,document.querySelector("#full_name-input").value="",document.querySelector("#description-input").value="",document.querySelector(".rating-meaning-text").textContent="",document.querySelectorAll(".rm-rating-star").forEach((function(e){return e.classList.remove("selected-rating-star")}))},window.handleButtonClick=function(){initDukaanAuth(successCallBack.bind(undefined,!!localStorage.getItem("al_to")))},window.successCallBack=function(e){var t=function(e){var t=e.can_write_review;(e.review_verified_purchase_only||!1)&&!t||!t?enqueueSnackbar("".concat(DukaanData.DUKAAN_LANGUAGE.YOU_NEED_TO_PURCHASE_THE_PRODUCT_FIRST,"!"),!0,"error"):openWriteReviewModal()};e?t(window.DukaanData.RATINGS_DATA):mainReviewFetchCall(!1,t)},window.openDeleteModal=function(){document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementById("review-delete-modal").classList.remove("hidden")},window.closeDeleteModal=function(){document.getElementsByTagName("body")[0].style.overflow="auto",document.getElementById("review-delete-modal").classList.add("hidden")},window.deleteReview=function(){var e={};localStorage&&localStorage.al_to&&(e.Authorization="Bearer ".concat(localStorage.al_to)),axios.delete("".concat(window.DukaanData.CLIENT_API_ENDPOINT,"/api/product/buyer/").concat(window.DukaanData.DUKAAN_PRODUCT.id,"/product/review/").concat(currentUserReviewId,"/"),{headers:e}).then((function(e){closeDeleteModal(),enqueueSnackbar(DukaanData.DUKAAN_LANGUAGE.REVIEW_DELETED_SUCCESSFULLY,!0,"success"),editingReview=!1,mainReviewFetchCall()})).catch((function(e){return console.log(e)}))},renderReviewsPlugin()},{"@swc/helpers/lib/_object_spread.js":"dX5g8","@swc/helpers/lib/_sliced_to_array.js":"hlByT","@swc/helpers/lib/_to_consumable_array.js":"eWwLC","@parcel/transformer-js/src/esmodule-helpers.js":"jFRmm"}],dX5g8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i.default(e,t,n[t])}))}return e};var a,i=(a=e("./_define_property"))&&a.__esModule?a:{default:a}},{"./_define_property":"c01ct"}],c01ct:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}},{}],hlByT:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return a.default(e)||i.default(e,t)||o.default(e,t)||r.default()};var a=d(e("./_array_with_holes")),i=d(e("./_iterable_to_array")),r=d(e("./_non_iterable_rest")),o=d(e("./_unsupported_iterable_to_array"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./_array_with_holes":"igsek","./_iterable_to_array":"9CZA6","./_non_iterable_rest":"eMZS5","./_unsupported_iterable_to_array":"iaXcf"}],igsek:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(Array.isArray(e))return e}},{}],"9CZA6":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}},{}],eMZS5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},{}],iaXcf:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(!e)return;if("string"==typeof e)return i.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i.default(e,t)};var a,i=(a=e("./_array_like_to_array"))&&a.__esModule?a:{default:a}},{"./_array_like_to_array":"3lL3q"}],"3lL3q":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}},{}],eWwLC:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default(e)||i.default(e)||o.default(e)||r.default()};var a=d(e("./_array_without_holes")),i=d(e("./_iterable_to_array")),r=d(e("./_non_iterable_spread")),o=d(e("./_unsupported_iterable_to_array"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./_array_without_holes":"lxPrq","./_iterable_to_array":"9CZA6","./_non_iterable_spread":"8SU2Y","./_unsupported_iterable_to_array":"iaXcf"}],lxPrq:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(Array.isArray(e))return i.default(e)};var a,i=(a=e("./_array_like_to_array"))&&a.__esModule?a:{default:a}},{"./_array_like_to_array":"3lL3q"}],"8SU2Y":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},{}],jFRmm:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach((function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})})),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}]},["8WLOx"],"8WLOx");